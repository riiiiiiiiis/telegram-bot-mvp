# ✅ Чеклист деплоя на Railway

## Подготовка бота

- [ ] Создан бот через @BotFather
- [ ] Получен токен бота
- [ ] **ВАЖНО**: Отключен Privacy Mode (`/setprivacy` → бот → `Disable`)
- [ ] Бот протестирован локально (опционально)

## Подготовка кода

- [ ] Код загружен в GitHub репозиторий
- [ ] Все файлы присутствуют:
  - [ ] `main.py`
  - [ ] `requirements.txt`
  - [ ] `Procfile`
  - [ ] `runtime.txt`
  - [ ] `railway.json`
  - [ ] `.gitignore`
- [ ] Токены НЕ захардкожены в коде
- [ ] `.env` файлы добавлены в `.gitignore`

## Настройка Railway

### Создание проекта
- [ ] Зарегистрирован аккаунт на [railway.app](https://railway.app)
- [ ] Создан новый проект
- [ ] Подключен GitHub репозиторий

### Добавление базы данных
- [ ] Добавлен PostgreSQL сервис
- [ ] Переменная `DATABASE_URL` создана автоматически

### Переменные окружения
- [ ] Установлена переменная `TELEGRAM_TOKEN` со значением токена
- [ ] Переменная `PORT` создана автоматически
- [ ] Переменная `DATABASE_URL` создана автоматически

## Деплой

- [ ] Код задеплоен на Railway
- [ ] Деплой прошел успешно (зеленый статус)
- [ ] Логи показывают успешный запуск
- [ ] Health check отвечает (проверить URL приложения)

## Тестирование

### Health Check
- [ ] `https://your-app.railway.app/health` возвращает статус "healthy"
- [ ] База данных показывает статус "connected"

### Функциональность бота
- [ ] Бот добавлен в тестовый групповой чат
- [ ] Бот получает и сохраняет сообщения
- [ ] В логах видны записи о сохранении сообщений
- [ ] В базе данных появляются записи в таблицах

## Мониторинг

- [ ] Настроены уведомления Railway (опционально)
- [ ] Проверен расход ресурсов
- [ ] Настроен мониторинг логов

## Безопасность

- [ ] Токен бота хранится только в переменных окружения Railway
- [ ] `.env` файлы не попали в Git
- [ ] Доступ к Railway аккаунту защищен

## Финальная проверка

- [ ] Бот работает стабильно 24/7
- [ ] Сообщения сохраняются в базу данных
- [ ] Health check стабильно отвечает
- [ ] Нет критических ошибок в логах
- [ ] Расход ресурсов в пределах нормы

## Troubleshooting

### Если бот не запускается:
1. Проверить логи Railway
2. Убедиться, что `TELEGRAM_TOKEN` установлен
3. Проверить статус PostgreSQL сервиса

### Если бот не получает сообщения:
1. Убедиться, что Privacy Mode отключен
2. Проверить, что бот добавлен в групповой чат
3. Проверить корректность токена

### Если ошибки базы данных:
1. Проверить статус PostgreSQL в Railway
2. Убедиться, что `DATABASE_URL` установлен
3. Проверить логи на ошибки подключения

## Полезные команды Railway CLI

```bash
# Просмотр логов
railway logs

# Просмотр переменных окружения
railway variables

# Подключение к базе данных
railway connect postgresql

# Статус сервисов
railway status
```

## Контакты поддержки

- Railway Documentation: https://docs.railway.app/
- Railway Discord: https://discord.gg/railway
- Telegram Bot API: https://core.telegram.org/bots/api